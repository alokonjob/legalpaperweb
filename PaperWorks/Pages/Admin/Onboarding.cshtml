@page
@model PaperWorks.OnboardingModel
@{
    ViewData["Title"] = "Onboarding";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}
@*<section id="onboarding">
    <h4 class="lead text-center">Onboarding</h4>
</section>*@
<section id="onboarding">
    <!-- MultiStep Form -->
    <div class="container-fluid" id="grad1">
        <div class="row justify-content-center mt-0">
            <div class="col-11 col-sm-9 col-md-7 col-lg-6 text-center p-0 mt-3 mb-2">
                <div class="card px-0 pt-4 pb-0 mt-3 mb-3">
                    <h2><strong>Sign Up Your Consultant Account</strong></h2>
                    @*<p>Fill all form field to go to next step</p>*@
                    <div class="row">
                        <div class="col-md-12 mx-0">
                            <form id="msform" method="post" asp-page-handler="addconsultant" data-ajax="true" data-ajax-method="post" data-ajax-complete="completed">
                                <!-- progressbar -->
                                <ul id="progressbar">
                                    <li class="active" id="account"><strong>Account</strong></li>
                                    <li id="personal"><strong>Address</strong></li>
                                    <li id="personal"><strong>Document and Tax</strong></li>
                                    <li id="payment"><strong>Enable Service</strong></li>
                                    <li id="confirm"><strong>Finish</strong></li>
                                </ul> <!-- fieldsets -->
                                <fieldset id="account">
                                    <div class="form-card">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label asp-for="Input.Name"></label>
                                                    <input asp-for="Input.Name" class="form-control" />
                                                    <span asp-validation-for="Input.Name" class="text-danger"></span>
                                                </div>
                                                <div class="form-group">
                                                    <label asp-for="Input.Email"></label>
                                                    <input asp-for="Input.Email" class="form-control" />
                                                    <span asp-validation-for="Input.Email" class="text-danger"></span>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label asp-for="Input.PhoneNumberCountryCode"></label>
                                                    <select asp-for="Input.PhoneNumberCountryCode" asp-items="Model.AvailableCountries" class="form-control" value="India"></select>
                                                    <span asp-validation-for="Input.PhoneNumberCountryCode" class="text-danger"></span>
                                                </div>

                                                <div class="form-group">
                                                    <label asp-for="Input.PhoneNumber"></label>
                                                    <input asp-for="Input.PhoneNumber" class="form-control" />
                                                    <span asp-validation-for="Input.PhoneNumber" class="text-danger" disabled></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">

                                            @if (ModelState.Root.ValidationState != Microsoft.AspNetCore.Mvc.ModelBinding.ModelValidationState.Unvalidated && ModelState.ErrorCount > 0)
                                            {<div class="alert alert-danger" role="alert">
                                                    @Html.ValidationSummary(true)
                                                </div>

                                            }
                                        </div>
                                    </div>

                                    <input type="button" name="next" class="next action-button" value="Next Step" />
                                </fieldset>
                                <fieldset id="address">
                                    
                                    <div class="form-card">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label asp-for="Input.AddressOfUser.HouseNo"></label>
                                                    <input asp-for="Input.AddressOfUser.HouseNo" class="form-control" />
                                                    <span asp-validation-for="Input.AddressOfUser.HouseNo" class="text-danger"></span>
                                                </div>
                                                <div class="form-group">
                                                    <label asp-for="Input.AddressOfUser.Locality"></label>
                                                    <input asp-for="Input.AddressOfUser.Locality" class="form-control" />
                                                    <span asp-validation-for="Input.AddressOfUser.Locality" class="text-danger"></span>
                                                </div>
                                                <div class="form-group">
                                                    <label asp-for="Input.AddressOfUser.LandMark"></label>
                                                    <input asp-for="Input.AddressOfUser.LandMark" class="form-control" />
                                                    <span asp-validation-for="Input.AddressOfUser.LandMark" class="text-danger"></span>
                                                </div>
                                                <div class="form-group">
                                                    <label asp-for="Input.AddressOfUser.City"></label>
                                                    <input asp-for="Input.AddressOfUser.City" class="form-control" />
                                                    <span asp-validation-for="Input.AddressOfUser.City" class="text-danger"></span>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label asp-for="Input.AddressOfUser.Pin"></label>
                                                    <input asp-for="Input.AddressOfUser.Pin" class="form-control" />
                                                    <span asp-validation-for="Input.AddressOfUser.Pin" class="text-danger"></span>
                                                </div>
                                                <div class="form-group">
                                                    <label asp-for="Input.AddressOfUser.State"></label>
                                                    <select asp-for="Input.AddressOfUser.State" asp-items="Model.AvailableStates" class="form-control" value="Delhi"></select>
                                                    <span asp-validation-for="Input.AddressOfUser.State" class="text-danger"></span>
                                                </div>
                                                <div class="form-group">
                                                    <label asp-for="Input.AddressOfUser.Country"></label>
                                                    <select asp-for="Input.AddressOfUser.Country" asp-items="Model.AvailableCountries" class="form-control" value="IN"></select>
                                                    <span asp-validation-for="Input.AddressOfUser.Country" class="text-danger"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <input type="button" name="previous" class="previous action-button-previous" value="Previous" />
                                    <input type="button" name="next" class="next action-button" value="Next Step" />
                                </fieldset>
                                <fieldset id="verification">
                                    <div class="form-card">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label asp-for="Input.ConsultantDocuments.Adhaar"></label>
                                                    <input asp-for="Input.ConsultantDocuments.Adhaar" class="form-control" />
                                                    <span asp-validation-for="Input.ConsultantDocuments.Adhaar" class="text-danger"></span>
                                                </div>
                                                <div class="form-group">
                                                    <label asp-for="Input.ConsultantDocuments.PanCard"></label>
                                                    <input asp-for="Input.ConsultantDocuments.PanCard" class="form-control" />
                                                    <span asp-validation-for="Input.ConsultantDocuments.PanCard" class="text-danger"></span>
                                                </div>
                                                <div class="form-group">
                                                    <label asp-for="Input.ConsultantDocuments.VoterId"></label>
                                                    <input asp-for="Input.ConsultantDocuments.VoterId" class="form-control" />
                                                    <span asp-validation-for="Input.ConsultantDocuments.VoterId" class="text-danger"></span>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label asp-for="Input.ConsultantDocuments.DrivingLicense"></label>
                                                    <input asp-for="Input.ConsultantDocuments.DrivingLicense" class="form-control" />
                                                    <span asp-validation-for="Input.ConsultantDocuments.DrivingLicense" class="text-danger"></span>
                                                </div>
                                                <div class="form-group">
                                                    <label asp-for="Input.ConsultantTaxDetails.GST"></label>
                                                    <input asp-for="Input.ConsultantTaxDetails.GST" class="form-control" />
                                                    <span asp-validation-for="Input.ConsultantTaxDetails.GST" class="text-danger"></span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        
                                    </div>
                                    <input type="button" name="previous" class="previous action-button-previous" value="Previous" />
                                    <input type="button" name="next" class="next action-button" value="Next Step" />
                                </fieldset>
                                <fieldset id="serviceAndCostEnable">
                                    <div class="form-card">
                                        <div>
                                            <select id="locationSelection" asp-for="Input.City" asp-items="Model.GeoSelection" class="form-control" ></select>
                                        </div>
                                    <div class="serviceListdiv mt-1">

                                    </div>
                                    </div> <input type="button" name="previous" class="previous action-button-previous" value="Previous" /> 
                                    <input type="submit" name="make_payment" class="next action-button" value="Confirm" />
                                </fieldset>
                                <fieldset id="confirmation">
                                    <div class="form-card">
                                        <h2 class="fs-title text-center">Success !</h2> <br><br>
                                        <div class="row justify-content-center">
                                            <div class="col-3"> <img src="https://img.icons8.com/color/96/000000/ok--v2.png" class="fit-image"> </div>
                                        </div> <br><br>
                                        <div class="row justify-content-center">
                                            <div class="col-7 text-center">
                                                <h5>You Have Successfully Signed Up</h5>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

@section Scripts{
    <partial name="_ValidationScriptsPartial" />
    <script type="text/javascript">
        $(document).ready(function () {
            $("#onboarding").css("margin-top", $("#topnavbarbutnobeer").height() * 1.3);
        });
    </script>
    <script>
        $(document).ready(function () {

            var current_fs, next_fs, previous_fs; //fieldsets
            var opacity;

            $(".next").click(function () {

                current_fs = $(this).parent();
                next_fs = $(this).parent().next();

                //Add Class Active
                $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");

                //show the next fieldset
                next_fs.show();
                //hide the current fieldset with style
                current_fs.animate({ opacity: 0 }, {
                    step: function (now) {
                        // for making fielset appear animation
                        opacity = 1 - now;

                        current_fs.css({
                            'display': 'none',
                            'position': 'relative'
                        });
                        next_fs.css({ 'opacity': opacity });
                    },
                    duration: 600
                });
            });

            $(".previous").click(function () {

                current_fs = $(this).parent();
                previous_fs = $(this).parent().prev();

                //Remove class active
                $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");

                //show the previous fieldset
                previous_fs.show();

                //hide the current fieldset with style
                current_fs.animate({ opacity: 0 }, {
                    step: function (now) {
                        // for making fielset appear animation
                        opacity = 1 - now;

                        current_fs.css({
                            'display': 'none',
                            'position': 'relative'
                        });
                        previous_fs.css({ 'opacity': opacity });
                    },
                    duration: 600
                });
            });

            $('.radio-group .radio').click(function () {
                $(this).parent().find('.radio').removeClass('selected');
                $(this).addClass('selected');
            });

            $(".submit").click(function () {
                return false;
            })

        });
    </script>
    <script type="text/javascript" language="javascript" src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/dataTabless/DataTables-1.10.21/js/jquery.dataTables.min.js"></script>
    <script src="~/dataTabless/DataTables-1.10.21/js/dataTables.bootstrap4.min.js"></script>
    <script src="~/dataTabless/Responsive-2.2.5/js/responsive.bootstrap4.min.js"></script>
    <script src="~/dataTabless/FixedColumns-3.3.1/js/dataTables.fixedColumns.min.js"></script>
    <script>
    $(function () {
        $("#locationSelection").on("change", function() {
            var city = $(this).val();
            $.get(`?handler=EnabledService&city=${city}`, (data) => {
                $(".serviceListdiv").empty();
                    $(".serviceListdiv").append(`${data}`);
            });
        });
    });
</script>
    <script>
        completed = function (xhr) {
            $(".caseUpdateList").empty();
            $(".caseUpdateList").append(`${xhr.responseText}`);
            //alert(`Wow ${xhr.responseText}, you are brave!`);
        };

    </script>
}

