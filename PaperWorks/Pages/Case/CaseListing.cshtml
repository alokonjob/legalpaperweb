@page
@using Microsoft.Extensions.Localization;
@inject IStringLocalizer<CaseListingModel> localizer
@model PaperWorks.CaseListingModel
@{
    ViewData["Title"] = "CaseListing";
    Layout = "~/Pages/Shared/_Layout.cshtml";
    var requestCultureFeature = HttpContext.Features.Get<IRequestCultureFeature>();
    var requestCulture = requestCultureFeature.RequestCulture;
}

<section id="caseListSection">
    <h4 class="display-4 m-3 text-muted text-center" data-aos="fade-left" data-aos-delay="800">case List</h4>
</section>


<table class="table table-striped table-bordered dt-responsive nowrap" id="caseList" style="width:100%">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.CaseList[0].Order.ServiceName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CaseList[0].Order.City)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CaseList[0].Order.CustomerEmail)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CaseList[0].Order.CustomerPhone)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CaseList[0].Order.ConsultantEmail)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CaseList[0].Order.ConsultantPhone)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CaseList[0].Order.CostToCustomer)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CaseList[0].CurrentStatus)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CaseList[0].EscalationStatus)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CaseList[0].CreatedDate)
            </th>
            <th>
                Navigate To
            </th>

        </tr>
    </thead>
    <tbody>

        @foreach (var customerCase in Model.CaseList)
                {
        <tr>
            <td>
                @Html.DisplayFor(model => localizer[customerCase.Order.ServiceName].Value)
            </td>
            <td>
                @Html.DisplayFor(model => customerCase.Order.City)
            </td>
            <td>
                @Html.DisplayFor(model => customerCase.Order.CustomerEmail)
            </td>
            <td>
                @Html.DisplayFor(model => customerCase.Order.CustomerPhone)
            </td>
            <td>
                @Html.DisplayFor(model => customerCase.Order.ConsultantEmail)
            </td>
            <td>
                @Html.DisplayFor(model => customerCase.Order.ConsultantPhone)
            </td>
            <td>
                @Html.DisplayFor(model => customerCase.Order.CostToCustomer)
            </td>
            <td>
                @Html.DisplayFor(model => customerCase.CurrentStatus)
            </td>
            <td>
                @Html.DisplayFor(model => customerCase.EscalationStatus)
            </td>
            <td>
                @Html.DisplayFor(model => customerCase.CreatedDate)
            </td>
            <td>
                <a asp-page="/Order/PreCheckout" class="btn btn-success btn-block">Details</a>
            </td>

        </tr>

                }
    </tbody>
</table>



@section Scripts{


    <script src="~/datatables/jquery.dataTables.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#caseListSection").css("margin-top", $("#topnavbarbutnobeer").height() * 1.3);
        });
    </script>
    <script type="text/javascript" language="javascript" src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/dataTabless/DataTables-1.10.21/js/jquery.dataTables.min.js"></script>
    <script src="~/dataTabless/DataTables-1.10.21/js/dataTables.bootstrap4.min.js"></script>
    @*<script src="~/dataTabless/Responsive-2.2.5/js/dataTables.responsive.min.js"></script>*@
    <script src="~/dataTabless/Responsive-2.2.5/js/responsive.bootstrap4.min.js"></script>
    <script src="~/dataTabless/FixedColumns-3.3.1/js/dataTables.fixedColumns.min.js"></script>
    
@*<script type="text/javascript" language="javascript" src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/dataTabless/DataTables-1.10.21/js/jquery.dataTables.min.js"></script>
    <script src="~/dataTabless/DataTables-1.10.21/js/dataTables.bootstrap4.min.js"></script>
    <script src="~/dataTabless/Responsive-2.2.5/js/dataTables.responsive.min.js"></script>
    <script src="~/dataTabless/Responsive-2.2.5/js/responsive.bootstrap4.min.js"></script>
    <script src="~/dataTabless/FixedColumns-3.3.1/js/dataTables.fixedColumns.min.js"></script>*@
    <script>
        $(document).ready(function () {
            $('#caseList').DataTable({
                scrollY: "600px",
                scrollX: true,
                scrollCollapse: true,
                paging: true,
                columnDefs: [
                    { width: '20%', targets: 0 }
                ],
                fixedColumns: true
            });
        });
    </script>

}

